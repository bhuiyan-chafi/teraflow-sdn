<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Path Finder Results</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <div class="container mt-5 mb-4">
      <h1 class="mb-4">Path Finder Results</h1>
      
      <div class="alert alert-info">
        <strong>Request:</strong> {{ src_device }}:{{ src_port }} &rarr; {{ dst_device }}:{{ dst_port }} ({{ bandwidth }} Gbps)
      </div>

      {% if dijkstra_paths %}
      <div class="card mb-4 border-success">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0">Shortest Path (Dijkstra)</h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead class="table-light">
                <tr>
                  <th>Hop #</th>
                  <th>Link Name</th>
                  <th>Source</th>
                  <th>Destination</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {% if dijkstra_paths %}
                  {% set path = dijkstra_paths[0] %}
                  <tr class="table-secondary"><td colspan="6"><strong>Path Option 1 (Shortest)</strong> <a href="#" class="btn btn-sm btn-outline-primary float-end">RSA Computation</a></td></tr>
                  {% for link in path %}
                  <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ link.name }}</td>
                    <td>{{ link.src }}:{{ link.src_port }}</td>
                    <td>{{ link.dst }}:{{ link.dst_port }}</td>
                    <td><span class="badge bg-success">Valid</span></td>
                    <td></td>
                  </tr>
                  {% endfor %}
                {% endif %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      {% endif %}

      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">All Available Paths</h5>
        </div>
        <div class="card-body">
    {# All Available Paths #}
    {% if all_paths %}
      <div class="alert alert-success">
        Found <strong>{{ all_paths|length }}</strong> valid paths.
      </div>
      
      <div class="table-responsive" style="max-height: 500px; overflow-y: auto;">
        <table class="table table-striped table-hover table-sm">
          <thead class="table-light">
            <tr>
              <th>#</th>
              <th>Path Route</th>
              <th>Hops</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for path in all_paths %}
            <tr>
              <td>{{ loop.index }}</td>
              <td>
                {% for link in path %}
                  <span class="badge bg-secondary">{{ link.src }}</span> &rarr;
                  {% if loop.last %}
                    <span class="badge bg-secondary">{{ link.dst }}</span>
                  {% endif %}
                {% endfor %}
                <br>
                <small class="text-muted">
                  {% for link in path %}
                    {{ link.name }} ({{ link.src_port }}&rarr;{{ link.dst_port }}){% if not loop.last %} | {% endif %}
                  {% endfor %}
                </small>
              </td>
              <td>{{ path|length }}</td>
              <td><a href="#" class="btn btn-sm btn-outline-success">RSA</a></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="text-muted">No other paths found.</p>
    {% endif %}
        </div>
      </div>

      <div class="mt-4">
        <a href="{{ url_for('path_finder') }}" class="btn btn-primary">Find Another Path</a>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Home</a>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
